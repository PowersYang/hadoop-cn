<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MR Support for YARN Shared Cache | Hadoop中文网</title>
    <meta name="description" content="Hadoop官方文档中文社区">
    <link rel="icon" href="/hadoop.jpeg">
    
    <link rel="preload" href="/assets/css/0.styles.fefea12e.css" as="style"><link rel="preload" href="/assets/js/app.03e63b66.js" as="script"><link rel="preload" href="/assets/js/2.fd33e103.js" as="script"><link rel="preload" href="/assets/js/28.bba4c1c3.js" as="script"><link rel="prefetch" href="/assets/js/10.0dbc29ee.js"><link rel="prefetch" href="/assets/js/100.51e7458e.js"><link rel="prefetch" href="/assets/js/101.cab336f3.js"><link rel="prefetch" href="/assets/js/102.d7e40b1a.js"><link rel="prefetch" href="/assets/js/103.3cd23502.js"><link rel="prefetch" href="/assets/js/104.a263cbd3.js"><link rel="prefetch" href="/assets/js/105.1cf856b7.js"><link rel="prefetch" href="/assets/js/106.1bd66c2f.js"><link rel="prefetch" href="/assets/js/107.7acc52af.js"><link rel="prefetch" href="/assets/js/108.096bf626.js"><link rel="prefetch" href="/assets/js/109.91d5ec0d.js"><link rel="prefetch" href="/assets/js/11.84130fe4.js"><link rel="prefetch" href="/assets/js/110.602bc28b.js"><link rel="prefetch" href="/assets/js/111.490d917f.js"><link rel="prefetch" href="/assets/js/112.dcdb6f77.js"><link rel="prefetch" href="/assets/js/113.0a64a78e.js"><link rel="prefetch" href="/assets/js/114.97ce2cfb.js"><link rel="prefetch" href="/assets/js/115.719819cf.js"><link rel="prefetch" href="/assets/js/116.606be43b.js"><link rel="prefetch" href="/assets/js/117.5f1db751.js"><link rel="prefetch" href="/assets/js/118.4c8b3331.js"><link rel="prefetch" href="/assets/js/119.756df93e.js"><link rel="prefetch" href="/assets/js/12.a85df2ad.js"><link rel="prefetch" href="/assets/js/120.21755a3d.js"><link rel="prefetch" href="/assets/js/121.86335dec.js"><link rel="prefetch" href="/assets/js/122.68c84b42.js"><link rel="prefetch" href="/assets/js/123.26f2d157.js"><link rel="prefetch" href="/assets/js/124.b8bb5eac.js"><link rel="prefetch" href="/assets/js/125.d3748b6f.js"><link rel="prefetch" href="/assets/js/126.74a59909.js"><link rel="prefetch" href="/assets/js/127.e75ea051.js"><link rel="prefetch" href="/assets/js/128.86691d41.js"><link rel="prefetch" href="/assets/js/129.1b73844b.js"><link rel="prefetch" href="/assets/js/13.5cc92b07.js"><link rel="prefetch" href="/assets/js/14.23af424b.js"><link rel="prefetch" href="/assets/js/15.d44d7e96.js"><link rel="prefetch" href="/assets/js/16.9433ad8d.js"><link rel="prefetch" href="/assets/js/17.e88b2671.js"><link rel="prefetch" href="/assets/js/18.621a61a9.js"><link rel="prefetch" href="/assets/js/19.c2269943.js"><link rel="prefetch" href="/assets/js/20.97a13073.js"><link rel="prefetch" href="/assets/js/21.cfddb2e0.js"><link rel="prefetch" href="/assets/js/22.3fc2e173.js"><link rel="prefetch" href="/assets/js/23.b44f9aaa.js"><link rel="prefetch" href="/assets/js/24.5118c903.js"><link rel="prefetch" href="/assets/js/25.d075e5d7.js"><link rel="prefetch" href="/assets/js/26.773f2460.js"><link rel="prefetch" href="/assets/js/27.d0e0d308.js"><link rel="prefetch" href="/assets/js/29.0d309c43.js"><link rel="prefetch" href="/assets/js/3.df8ab865.js"><link rel="prefetch" href="/assets/js/30.238bac85.js"><link rel="prefetch" href="/assets/js/31.abd71d38.js"><link rel="prefetch" href="/assets/js/32.126829f0.js"><link rel="prefetch" href="/assets/js/33.b7210392.js"><link rel="prefetch" href="/assets/js/34.808d7f11.js"><link rel="prefetch" href="/assets/js/35.92cc0670.js"><link rel="prefetch" href="/assets/js/36.525eca62.js"><link rel="prefetch" href="/assets/js/37.085ca99e.js"><link rel="prefetch" href="/assets/js/38.bd6ba530.js"><link rel="prefetch" href="/assets/js/39.bdcf0246.js"><link rel="prefetch" href="/assets/js/4.03a382ed.js"><link rel="prefetch" href="/assets/js/40.5e383ac6.js"><link rel="prefetch" href="/assets/js/41.fb3d104e.js"><link rel="prefetch" href="/assets/js/42.d3be59ab.js"><link rel="prefetch" href="/assets/js/43.861403a7.js"><link rel="prefetch" href="/assets/js/44.64ea788c.js"><link rel="prefetch" href="/assets/js/45.586e01c2.js"><link rel="prefetch" href="/assets/js/46.4e18b7fe.js"><link rel="prefetch" href="/assets/js/47.c1dba008.js"><link rel="prefetch" href="/assets/js/48.da57593b.js"><link rel="prefetch" href="/assets/js/49.8e699822.js"><link rel="prefetch" href="/assets/js/5.21b79be3.js"><link rel="prefetch" href="/assets/js/50.697ac881.js"><link rel="prefetch" href="/assets/js/51.6c32c16e.js"><link rel="prefetch" href="/assets/js/52.d137da31.js"><link rel="prefetch" href="/assets/js/53.22caaa9a.js"><link rel="prefetch" href="/assets/js/54.7f1d1532.js"><link rel="prefetch" href="/assets/js/55.40dbbf5b.js"><link rel="prefetch" href="/assets/js/56.04c24edc.js"><link rel="prefetch" href="/assets/js/57.b15918db.js"><link rel="prefetch" href="/assets/js/58.b3eb784b.js"><link rel="prefetch" href="/assets/js/59.0d462dd8.js"><link rel="prefetch" href="/assets/js/6.64edd77a.js"><link rel="prefetch" href="/assets/js/60.ae65015b.js"><link rel="prefetch" href="/assets/js/61.9b15da8f.js"><link rel="prefetch" href="/assets/js/62.ca728b66.js"><link rel="prefetch" href="/assets/js/63.312b3bdd.js"><link rel="prefetch" href="/assets/js/64.56be4886.js"><link rel="prefetch" href="/assets/js/65.dff3c3a3.js"><link rel="prefetch" href="/assets/js/66.95dfff51.js"><link rel="prefetch" href="/assets/js/67.17e7a9be.js"><link rel="prefetch" href="/assets/js/68.e3b5c05a.js"><link rel="prefetch" href="/assets/js/69.9ab8c7f8.js"><link rel="prefetch" href="/assets/js/7.4a3ae97d.js"><link rel="prefetch" href="/assets/js/70.8d72690b.js"><link rel="prefetch" href="/assets/js/71.3c25cf04.js"><link rel="prefetch" href="/assets/js/72.02b02d8d.js"><link rel="prefetch" href="/assets/js/73.2a8d2681.js"><link rel="prefetch" href="/assets/js/74.c577aba5.js"><link rel="prefetch" href="/assets/js/75.7d2617b0.js"><link rel="prefetch" href="/assets/js/76.97ad371e.js"><link rel="prefetch" href="/assets/js/77.4495b015.js"><link rel="prefetch" href="/assets/js/78.c7510b35.js"><link rel="prefetch" href="/assets/js/79.dc2b4ca2.js"><link rel="prefetch" href="/assets/js/8.fc1e2b26.js"><link rel="prefetch" href="/assets/js/80.454a982e.js"><link rel="prefetch" href="/assets/js/81.eba66eb5.js"><link rel="prefetch" href="/assets/js/82.1f34b986.js"><link rel="prefetch" href="/assets/js/83.a15e7917.js"><link rel="prefetch" href="/assets/js/84.212c8551.js"><link rel="prefetch" href="/assets/js/85.c077f397.js"><link rel="prefetch" href="/assets/js/86.70192242.js"><link rel="prefetch" href="/assets/js/87.e53f7254.js"><link rel="prefetch" href="/assets/js/88.d2f28869.js"><link rel="prefetch" href="/assets/js/89.9b4c13ce.js"><link rel="prefetch" href="/assets/js/9.a7fc3cc9.js"><link rel="prefetch" href="/assets/js/90.af82565a.js"><link rel="prefetch" href="/assets/js/91.153dc863.js"><link rel="prefetch" href="/assets/js/92.ea32e690.js"><link rel="prefetch" href="/assets/js/93.4c656124.js"><link rel="prefetch" href="/assets/js/94.b2283b24.js"><link rel="prefetch" href="/assets/js/95.4ad17bba.js"><link rel="prefetch" href="/assets/js/96.4c0c4821.js"><link rel="prefetch" href="/assets/js/97.14f25834.js"><link rel="prefetch" href="/assets/js/98.92c9fd2d.js"><link rel="prefetch" href="/assets/js/99.ef340791.js">
    <link rel="stylesheet" href="/assets/css/0.styles.fefea12e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Hadoop中文网</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="https://hadoop.apache.org/releases.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  下载安装
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="参考文档" class="dropdown-title"><span class="title">参考文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/hadoop-mapreduce-client/hadoop-mapreduce-client-core/.html" class="nav-link">通用</a></li><li class="dropdown-item"><!----> <a href="/docs/hadoop-mapreduce-client/hadoop-mapreduce-client-core/.html" class="nav-link">公共</a></li><li class="dropdown-item"><!----> <a href="/docs/hadoop-mapreduce-client/hadoop-mapreduce-client-core/.html" class="nav-link">HDFS</a></li><li class="dropdown-item"><!----> <a href="/docs/hadoop-mapreduce-client/hadoop-mapreduce-client-core/.html" class="nav-link">MapReduce</a></li><li class="dropdown-item"><!----> <a href="/docs/hadoop-mapreduce-client/hadoop-mapreduce-client-core/.html" class="nav-link">MapReduce REST APIs</a></li><li class="dropdown-item"><!----> <a href="/docs/hadoop-mapreduce-client/hadoop-mapreduce-client-core/.html" class="nav-link">YARN REST APIs</a></li><li class="dropdown-item"><!----> <a href="/docs/hadoop-mapreduce-client/hadoop-mapreduce-client-core/.html" class="nav-link">YARN Service</a></li><li class="dropdown-item"><!----> <a href="/docs/hadoop-mapreduce-client/hadoop-mapreduce-client-core/.html" class="nav-link">Submarine</a></li><li class="dropdown-item"><!----> <a href="/docs/hadoop-mapreduce-client/hadoop-mapreduce-client-core/.html" class="nav-link">Hadoop兼容文件系统</a></li><li class="dropdown-item"><!----> <a href="/docs/hadoop-mapreduce-client/hadoop-mapreduce-client-core/.html" class="nav-link">Auth</a></li><li class="dropdown-item"><!----> <a href="/docs/hadoop-mapreduce-client/hadoop-mapreduce-client-core/.html" class="nav-link">工具</a></li><li class="dropdown-item"><!----> <a href="/docs/hadoop-mapreduce-client/hadoop-mapreduce-client-core/.html" class="nav-link">参考</a></li><li class="dropdown-item"><!----> <a href="/docs/hadoop-mapreduce-client/hadoop-mapreduce-client-core/.html" class="nav-link">配置</a></li></ul></div></div><div class="nav-item"><a href="/docs/awesome/" class="nav-link">资源教程</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="语言支持" class="dropdown-title"><span class="title">语言支持</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/language/ch.html" class="nav-link">简体中文</a></li><li class="dropdown-item"><!----> <a href="/language/en.html" class="nav-link">English</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="https://hadoop.apache.org/releases.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  下载安装
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="参考文档" class="dropdown-title"><span class="title">参考文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/hadoop-mapreduce-client/hadoop-mapreduce-client-core/.html" class="nav-link">通用</a></li><li class="dropdown-item"><!----> <a href="/docs/hadoop-mapreduce-client/hadoop-mapreduce-client-core/.html" class="nav-link">公共</a></li><li class="dropdown-item"><!----> <a href="/docs/hadoop-mapreduce-client/hadoop-mapreduce-client-core/.html" class="nav-link">HDFS</a></li><li class="dropdown-item"><!----> <a href="/docs/hadoop-mapreduce-client/hadoop-mapreduce-client-core/.html" class="nav-link">MapReduce</a></li><li class="dropdown-item"><!----> <a href="/docs/hadoop-mapreduce-client/hadoop-mapreduce-client-core/.html" class="nav-link">MapReduce REST APIs</a></li><li class="dropdown-item"><!----> <a href="/docs/hadoop-mapreduce-client/hadoop-mapreduce-client-core/.html" class="nav-link">YARN REST APIs</a></li><li class="dropdown-item"><!----> <a href="/docs/hadoop-mapreduce-client/hadoop-mapreduce-client-core/.html" class="nav-link">YARN Service</a></li><li class="dropdown-item"><!----> <a href="/docs/hadoop-mapreduce-client/hadoop-mapreduce-client-core/.html" class="nav-link">Submarine</a></li><li class="dropdown-item"><!----> <a href="/docs/hadoop-mapreduce-client/hadoop-mapreduce-client-core/.html" class="nav-link">Hadoop兼容文件系统</a></li><li class="dropdown-item"><!----> <a href="/docs/hadoop-mapreduce-client/hadoop-mapreduce-client-core/.html" class="nav-link">Auth</a></li><li class="dropdown-item"><!----> <a href="/docs/hadoop-mapreduce-client/hadoop-mapreduce-client-core/.html" class="nav-link">工具</a></li><li class="dropdown-item"><!----> <a href="/docs/hadoop-mapreduce-client/hadoop-mapreduce-client-core/.html" class="nav-link">参考</a></li><li class="dropdown-item"><!----> <a href="/docs/hadoop-mapreduce-client/hadoop-mapreduce-client-core/.html" class="nav-link">配置</a></li></ul></div></div><div class="nav-item"><a href="/docs/awesome/" class="nav-link">资源教程</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="语言支持" class="dropdown-title"><span class="title">语言支持</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/language/ch.html" class="nav-link">简体中文</a></li><li class="dropdown-item"><!----> <a href="/language/en.html" class="nav-link">English</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>MR Support for YARN Shared Cache</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/hadoop-mapreduce-client/hadoop-mapreduce-client-core/SharedCacheSupport.html#overview" class="sidebar-link">Overview</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/hadoop-mapreduce-client/hadoop-mapreduce-client-core/SharedCacheSupport.html#enabling-disabling-the-shared-cache" class="sidebar-link">Enabling/Disabling the shared cache</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/hadoop-mapreduce-client/hadoop-mapreduce-client-core/SharedCacheSupport.html#specifying-resources-for-the-cache" class="sidebar-link">Specifying resources for the cache</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/hadoop-mapreduce-client/hadoop-mapreduce-client-core/SharedCacheSupport.html#resource-naming" class="sidebar-link">Resource naming</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/hadoop-mapreduce-client/hadoop-mapreduce-client-core/SharedCacheSupport.html#resource-visibility" class="sidebar-link">Resource Visibility</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/hadoop-mapreduce-client/hadoop-mapreduce-client-core/SharedCacheSupport.html#mapreduce-client-behavior-while-the-shared-cache-is-unavailable" class="sidebar-link">MapReduce client behavior while the shared cache is unavailable</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="mr-support-for-yarn-shared-cache"><a href="#mr-support-for-yarn-shared-cache" class="header-anchor">#</a> MR Support for YARN Shared Cache</h1> <h2 id="overview"><a href="#overview" class="header-anchor">#</a> Overview</h2> <p>MapReduce support for the YARN shared cache allows MapReduce jobs to take advantage of additional resource caching. This saves network bandwidth between the job submission client as well as within the YARN cluster itself. This will reduce job submission time and overall job runtime.</p> <h2 id="enabling-disabling-the-shared-cache"><a href="#enabling-disabling-the-shared-cache" class="header-anchor">#</a> Enabling/Disabling the shared cache</h2> <p>First, your YARN cluster must have the shared cache service running. Please see YARN documentation for information on how to setup the shared cache service.</p> <p>A MapReduce user can specify what resources are eligible to be uploaded to the shared cache based on resource type. This is done using a configuration parameter in mapred-site.xml:</p> <pre><code>&lt;property&gt;
    &lt;name&gt;mapreduce.job.sharedcache.mode&lt;/name&gt;
    &lt;value&gt;disabled&lt;/value&gt;
    &lt;description&gt;
       A comma delimited list of resource categories to submit to the
       shared cache. The valid categories are: jobjar, libjars, files,
       archives. If &quot;disabled&quot; is specified then the job submission code
       will not use the shared cache.
    &lt;/description&gt;
&lt;/property&gt;
</code></pre> <p>If a resource type is listed, it will check the shared cache to see if the resource is already in the cache. If so, it will use the cached resource, if not, it will specify that the resource needs to be uploaded asynchronously.</p> <h2 id="specifying-resources-for-the-cache"><a href="#specifying-resources-for-the-cache" class="header-anchor">#</a> Specifying resources for the cache</h2> <p>A MapReduce user has 3 ways to specify resources for a MapReduce job:</p> <ol><li>The command line via the generic options parser (i.e. -files, -archives, -libjars): If a resource is specified via the command line and the resource type is enabled for the shared cache, that resource will use the shared cache.</li> <li>The distributed cache api: If a resource is specified via the distributed cache the resource will not use the shared cache regardless of if the resource type is enabled for the shared cache.</li> <li>The shared cache api: This is a new set of methods added to the org.apache.hadoop.mapreduce.Job api. It allows users to add a file to the shared cache, add it to the shared cache and the classpath and add an archive to the shared cache. These resources will be placed in the distributed cache and, if their resource type is enabled the client will use the shared cache as well.</li></ol> <h2 id="resource-naming"><a href="#resource-naming" class="header-anchor">#</a> Resource naming</h2> <p>It is important to ensure that each resource for a MapReduce job has a unique file name. This prevents symlink clobbering when YARN containers running MapReduce tasks are localized during container launch. A user can specify their own resource name by using the fragment portion of a URI. For example, for file resources specified on the command line, it could look like this:</p> <pre><code>-files /local/path/file1.txt#foo.txt,/local/path2/file1.txt#bar.txt
</code></pre> <p>In the above example two files, named file1.txt, will be localized with two different names: foo.txt and bar.txt.</p> <h2 id="resource-visibility"><a href="#resource-visibility" class="header-anchor">#</a> Resource Visibility</h2> <p>All resources in the shared cache have a PUBLIC visibility.</p> <h2 id="mapreduce-client-behavior-while-the-shared-cache-is-unavailable"><a href="#mapreduce-client-behavior-while-the-shared-cache-is-unavailable" class="header-anchor">#</a> MapReduce client behavior while the shared cache is unavailable</h2> <p>In the event that the shared cache manager is unavailable, the MapReduce client uses a fail-fast mechanism. If the MapReduce client fails to contact the shared cache manager, the client will no longer use the shared cache for the rest of that job submission. This prevents the MapReduce client from timing out each time it tries to check for a resource in the shared cache. The MapReduce client quickly reverts to the default behavior and submits a Job as if the shared cache was never enabled in the first place.</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.03e63b66.js" defer></script><script src="/assets/js/2.fd33e103.js" defer></script><script src="/assets/js/28.bba4c1c3.js" defer></script>
  </body>
</html>
