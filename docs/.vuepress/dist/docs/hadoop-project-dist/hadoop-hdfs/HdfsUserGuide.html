<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>HDFS Users Guide | Hadoop中文网</title>
    <meta name="description" content="Hadoop中文网、Hadoop中文社区。">
    <link rel="shortcut icon" href="/hadoop.jpeg" type="image/jpeg">
  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?6395e1f7a05d6559b4beec785272bda1";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>
    
    <link rel="preload" href="/assets/css/0.styles.b88a0442.css" as="style"><link rel="preload" href="/assets/js/app.eea58141.js" as="script"><link rel="preload" href="/assets/js/2.1527429e.js" as="script"><link rel="preload" href="/assets/js/82.21b80d08.js" as="script"><link rel="prefetch" href="/assets/js/10.5cb7da5b.js"><link rel="prefetch" href="/assets/js/100.2c236c8f.js"><link rel="prefetch" href="/assets/js/101.55355fca.js"><link rel="prefetch" href="/assets/js/102.e6d11447.js"><link rel="prefetch" href="/assets/js/103.e1eb3970.js"><link rel="prefetch" href="/assets/js/104.0ed11e91.js"><link rel="prefetch" href="/assets/js/105.90430a3b.js"><link rel="prefetch" href="/assets/js/106.89607bb0.js"><link rel="prefetch" href="/assets/js/107.6fb2d748.js"><link rel="prefetch" href="/assets/js/108.f39ee754.js"><link rel="prefetch" href="/assets/js/109.5ab136f8.js"><link rel="prefetch" href="/assets/js/11.aaf95b6f.js"><link rel="prefetch" href="/assets/js/110.a36652e0.js"><link rel="prefetch" href="/assets/js/111.16cf1a3a.js"><link rel="prefetch" href="/assets/js/112.18b70e47.js"><link rel="prefetch" href="/assets/js/113.ae72b8a5.js"><link rel="prefetch" href="/assets/js/114.0d1aa37e.js"><link rel="prefetch" href="/assets/js/115.d527b8a4.js"><link rel="prefetch" href="/assets/js/116.e3cdccb1.js"><link rel="prefetch" href="/assets/js/117.af730128.js"><link rel="prefetch" href="/assets/js/118.a5e7b4e3.js"><link rel="prefetch" href="/assets/js/119.5493bbfa.js"><link rel="prefetch" href="/assets/js/12.819efc3d.js"><link rel="prefetch" href="/assets/js/120.37d67a4d.js"><link rel="prefetch" href="/assets/js/121.6276e21d.js"><link rel="prefetch" href="/assets/js/122.ee4703b1.js"><link rel="prefetch" href="/assets/js/123.9dcefdf0.js"><link rel="prefetch" href="/assets/js/124.a86c1db3.js"><link rel="prefetch" href="/assets/js/125.f24fdff1.js"><link rel="prefetch" href="/assets/js/126.87c45d40.js"><link rel="prefetch" href="/assets/js/127.095b00fd.js"><link rel="prefetch" href="/assets/js/128.fb3bb4b5.js"><link rel="prefetch" href="/assets/js/129.d6ce80f3.js"><link rel="prefetch" href="/assets/js/13.f647b942.js"><link rel="prefetch" href="/assets/js/130.048a2252.js"><link rel="prefetch" href="/assets/js/131.b247fc7f.js"><link rel="prefetch" href="/assets/js/132.8720f4de.js"><link rel="prefetch" href="/assets/js/133.c516533d.js"><link rel="prefetch" href="/assets/js/134.d8c02b38.js"><link rel="prefetch" href="/assets/js/135.8afa36d5.js"><link rel="prefetch" href="/assets/js/136.f0660a89.js"><link rel="prefetch" href="/assets/js/137.6b88bb49.js"><link rel="prefetch" href="/assets/js/138.ba5d3c82.js"><link rel="prefetch" href="/assets/js/139.1f9c45fa.js"><link rel="prefetch" href="/assets/js/14.6742af11.js"><link rel="prefetch" href="/assets/js/140.53ab8553.js"><link rel="prefetch" href="/assets/js/141.32cc6b15.js"><link rel="prefetch" href="/assets/js/142.b722bf36.js"><link rel="prefetch" href="/assets/js/143.e60a7fd8.js"><link rel="prefetch" href="/assets/js/144.2f352446.js"><link rel="prefetch" href="/assets/js/145.57ad13a1.js"><link rel="prefetch" href="/assets/js/146.a1f721cf.js"><link rel="prefetch" href="/assets/js/147.0aa5dc2a.js"><link rel="prefetch" href="/assets/js/148.0477c958.js"><link rel="prefetch" href="/assets/js/149.9f31edd2.js"><link rel="prefetch" href="/assets/js/15.a31eeeb4.js"><link rel="prefetch" href="/assets/js/150.be56a066.js"><link rel="prefetch" href="/assets/js/151.94b8a082.js"><link rel="prefetch" href="/assets/js/152.6ff6530d.js"><link rel="prefetch" href="/assets/js/153.3518f971.js"><link rel="prefetch" href="/assets/js/154.43efe220.js"><link rel="prefetch" href="/assets/js/155.1f5c4426.js"><link rel="prefetch" href="/assets/js/156.c84e6053.js"><link rel="prefetch" href="/assets/js/157.4c209133.js"><link rel="prefetch" href="/assets/js/158.ac8b8e71.js"><link rel="prefetch" href="/assets/js/159.924cfc73.js"><link rel="prefetch" href="/assets/js/16.2ef51d58.js"><link rel="prefetch" href="/assets/js/160.a4547e38.js"><link rel="prefetch" href="/assets/js/161.6e32ef93.js"><link rel="prefetch" href="/assets/js/162.048b419b.js"><link rel="prefetch" href="/assets/js/163.edd4f7b4.js"><link rel="prefetch" href="/assets/js/164.5830b6a8.js"><link rel="prefetch" href="/assets/js/165.4ab12791.js"><link rel="prefetch" href="/assets/js/166.6d42da0d.js"><link rel="prefetch" href="/assets/js/167.063d94b7.js"><link rel="prefetch" href="/assets/js/168.d20ec4be.js"><link rel="prefetch" href="/assets/js/169.678e68c1.js"><link rel="prefetch" href="/assets/js/17.959c54bc.js"><link rel="prefetch" href="/assets/js/170.a7873638.js"><link rel="prefetch" href="/assets/js/171.7e042b9d.js"><link rel="prefetch" href="/assets/js/172.3d89bc80.js"><link rel="prefetch" href="/assets/js/173.c4605dc4.js"><link rel="prefetch" href="/assets/js/174.47027ab7.js"><link rel="prefetch" href="/assets/js/175.edcc1c55.js"><link rel="prefetch" href="/assets/js/176.2b7d266f.js"><link rel="prefetch" href="/assets/js/177.f93013e9.js"><link rel="prefetch" href="/assets/js/178.161472ba.js"><link rel="prefetch" href="/assets/js/179.2d155331.js"><link rel="prefetch" href="/assets/js/18.d69f2c2f.js"><link rel="prefetch" href="/assets/js/180.daee26bb.js"><link rel="prefetch" href="/assets/js/181.f1dfc162.js"><link rel="prefetch" href="/assets/js/182.7cc6fec2.js"><link rel="prefetch" href="/assets/js/183.b50348ff.js"><link rel="prefetch" href="/assets/js/184.240a831c.js"><link rel="prefetch" href="/assets/js/185.d1ccee33.js"><link rel="prefetch" href="/assets/js/186.e358891a.js"><link rel="prefetch" href="/assets/js/187.59163624.js"><link rel="prefetch" href="/assets/js/188.2aac535b.js"><link rel="prefetch" href="/assets/js/189.226654de.js"><link rel="prefetch" href="/assets/js/19.dfe21415.js"><link rel="prefetch" href="/assets/js/190.af0cb3cc.js"><link rel="prefetch" href="/assets/js/191.90b61200.js"><link rel="prefetch" href="/assets/js/192.980181b0.js"><link rel="prefetch" href="/assets/js/193.9f56a80f.js"><link rel="prefetch" href="/assets/js/194.e700b97c.js"><link rel="prefetch" href="/assets/js/195.bdba232a.js"><link rel="prefetch" href="/assets/js/196.85f6e8b2.js"><link rel="prefetch" href="/assets/js/197.c18d8019.js"><link rel="prefetch" href="/assets/js/198.76d15a18.js"><link rel="prefetch" href="/assets/js/199.cc567626.js"><link rel="prefetch" href="/assets/js/20.f66dd63a.js"><link rel="prefetch" href="/assets/js/200.44fb0aed.js"><link rel="prefetch" href="/assets/js/201.b3eeccc9.js"><link rel="prefetch" href="/assets/js/202.bb99076a.js"><link rel="prefetch" href="/assets/js/203.65ffdcf9.js"><link rel="prefetch" href="/assets/js/204.3016f797.js"><link rel="prefetch" href="/assets/js/205.c58f1776.js"><link rel="prefetch" href="/assets/js/206.d4f0ac7f.js"><link rel="prefetch" href="/assets/js/207.d475429a.js"><link rel="prefetch" href="/assets/js/208.53589b54.js"><link rel="prefetch" href="/assets/js/209.f28acb73.js"><link rel="prefetch" href="/assets/js/21.b0b62289.js"><link rel="prefetch" href="/assets/js/210.d8f39841.js"><link rel="prefetch" href="/assets/js/211.b4d7dcf6.js"><link rel="prefetch" href="/assets/js/212.9b97e594.js"><link rel="prefetch" href="/assets/js/213.89c17cdd.js"><link rel="prefetch" href="/assets/js/214.168c3aff.js"><link rel="prefetch" href="/assets/js/215.13ec08a6.js"><link rel="prefetch" href="/assets/js/216.4dd3ea3e.js"><link rel="prefetch" href="/assets/js/217.6199fc99.js"><link rel="prefetch" href="/assets/js/218.58f4c4e7.js"><link rel="prefetch" href="/assets/js/219.93fbd4fe.js"><link rel="prefetch" href="/assets/js/22.779c0ada.js"><link rel="prefetch" href="/assets/js/220.dc6cdea5.js"><link rel="prefetch" href="/assets/js/221.29959d00.js"><link rel="prefetch" href="/assets/js/222.b155b777.js"><link rel="prefetch" href="/assets/js/223.12923b76.js"><link rel="prefetch" href="/assets/js/224.d32c850b.js"><link rel="prefetch" href="/assets/js/225.3c4bdd51.js"><link rel="prefetch" href="/assets/js/226.98e71297.js"><link rel="prefetch" href="/assets/js/227.0cdc82d1.js"><link rel="prefetch" href="/assets/js/228.ffb2ecde.js"><link rel="prefetch" href="/assets/js/229.61af4649.js"><link rel="prefetch" href="/assets/js/23.f8a992b8.js"><link rel="prefetch" href="/assets/js/230.e79071b4.js"><link rel="prefetch" href="/assets/js/231.ac5b6055.js"><link rel="prefetch" href="/assets/js/232.945dc4ae.js"><link rel="prefetch" href="/assets/js/233.4a132d06.js"><link rel="prefetch" href="/assets/js/234.ffecd044.js"><link rel="prefetch" href="/assets/js/235.3b0b5937.js"><link rel="prefetch" href="/assets/js/236.2c3f84a6.js"><link rel="prefetch" href="/assets/js/237.eb4a5faf.js"><link rel="prefetch" href="/assets/js/238.f4adbd38.js"><link rel="prefetch" href="/assets/js/239.22ec0b8f.js"><link rel="prefetch" href="/assets/js/24.5a476b4d.js"><link rel="prefetch" href="/assets/js/240.46d9f058.js"><link rel="prefetch" href="/assets/js/241.63ddcbdf.js"><link rel="prefetch" href="/assets/js/242.016fb14e.js"><link rel="prefetch" href="/assets/js/243.8a05c58b.js"><link rel="prefetch" href="/assets/js/244.a9d2ce0a.js"><link rel="prefetch" href="/assets/js/245.7a5fef49.js"><link rel="prefetch" href="/assets/js/246.80a5c3c7.js"><link rel="prefetch" href="/assets/js/247.5c1ac6db.js"><link rel="prefetch" href="/assets/js/248.199f6fca.js"><link rel="prefetch" href="/assets/js/249.a7b448bd.js"><link rel="prefetch" href="/assets/js/25.c1898b7c.js"><link rel="prefetch" href="/assets/js/250.fb86f7a6.js"><link rel="prefetch" href="/assets/js/251.c89e38e0.js"><link rel="prefetch" href="/assets/js/252.8436945c.js"><link rel="prefetch" href="/assets/js/253.14b8654c.js"><link rel="prefetch" href="/assets/js/254.080f19e7.js"><link rel="prefetch" href="/assets/js/255.46c7998d.js"><link rel="prefetch" href="/assets/js/256.62b54a23.js"><link rel="prefetch" href="/assets/js/257.5dc5e0c6.js"><link rel="prefetch" href="/assets/js/258.f777bf38.js"><link rel="prefetch" href="/assets/js/259.32dfb101.js"><link rel="prefetch" href="/assets/js/26.70f6bd2f.js"><link rel="prefetch" href="/assets/js/260.6c0a1bc3.js"><link rel="prefetch" href="/assets/js/261.e8e523b6.js"><link rel="prefetch" href="/assets/js/262.de3b78e7.js"><link rel="prefetch" href="/assets/js/263.9c2a028f.js"><link rel="prefetch" href="/assets/js/264.6b157e98.js"><link rel="prefetch" href="/assets/js/265.f482d8fc.js"><link rel="prefetch" href="/assets/js/266.a2f27112.js"><link rel="prefetch" href="/assets/js/267.872a5641.js"><link rel="prefetch" href="/assets/js/268.fbc7c696.js"><link rel="prefetch" href="/assets/js/269.a4a48394.js"><link rel="prefetch" href="/assets/js/27.5c96c032.js"><link rel="prefetch" href="/assets/js/270.9a6a8aa4.js"><link rel="prefetch" href="/assets/js/271.8eae9d89.js"><link rel="prefetch" href="/assets/js/272.c239f085.js"><link rel="prefetch" href="/assets/js/273.349662b3.js"><link rel="prefetch" href="/assets/js/28.0b0685be.js"><link rel="prefetch" href="/assets/js/29.0ae49f30.js"><link rel="prefetch" href="/assets/js/3.929f1b92.js"><link rel="prefetch" href="/assets/js/30.0406548e.js"><link rel="prefetch" href="/assets/js/31.70271f60.js"><link rel="prefetch" href="/assets/js/32.8b27d953.js"><link rel="prefetch" href="/assets/js/33.dade4be0.js"><link rel="prefetch" href="/assets/js/34.5664924f.js"><link rel="prefetch" href="/assets/js/35.d3ba196a.js"><link rel="prefetch" href="/assets/js/36.3f3179f2.js"><link rel="prefetch" href="/assets/js/37.a0c7fd93.js"><link rel="prefetch" href="/assets/js/38.eec29944.js"><link rel="prefetch" href="/assets/js/39.5bb7fd42.js"><link rel="prefetch" href="/assets/js/4.b0b8931c.js"><link rel="prefetch" href="/assets/js/40.41239924.js"><link rel="prefetch" href="/assets/js/41.03a3a3c9.js"><link rel="prefetch" href="/assets/js/42.093797e8.js"><link rel="prefetch" href="/assets/js/43.8a6fb95d.js"><link rel="prefetch" href="/assets/js/44.d4c47255.js"><link rel="prefetch" href="/assets/js/45.e758fcdb.js"><link rel="prefetch" href="/assets/js/46.6fcadf19.js"><link rel="prefetch" href="/assets/js/47.2cf8b9ed.js"><link rel="prefetch" href="/assets/js/48.3e7545e4.js"><link rel="prefetch" href="/assets/js/49.3d26ef4b.js"><link rel="prefetch" href="/assets/js/5.fc9d09ef.js"><link rel="prefetch" href="/assets/js/50.58b41031.js"><link rel="prefetch" href="/assets/js/51.1a5e5b5c.js"><link rel="prefetch" href="/assets/js/52.2000f44a.js"><link rel="prefetch" href="/assets/js/53.6f33f5f5.js"><link rel="prefetch" href="/assets/js/54.78d5f7c0.js"><link rel="prefetch" href="/assets/js/55.46c1b93a.js"><link rel="prefetch" href="/assets/js/56.564c5171.js"><link rel="prefetch" href="/assets/js/57.ae5218bc.js"><link rel="prefetch" href="/assets/js/58.d0a25012.js"><link rel="prefetch" href="/assets/js/59.b625aabd.js"><link rel="prefetch" href="/assets/js/6.e37480f8.js"><link rel="prefetch" href="/assets/js/60.79ac70c9.js"><link rel="prefetch" href="/assets/js/61.7730fecb.js"><link rel="prefetch" href="/assets/js/62.6594254c.js"><link rel="prefetch" href="/assets/js/63.d2fedf57.js"><link rel="prefetch" href="/assets/js/64.c0733cfa.js"><link rel="prefetch" href="/assets/js/65.470d983d.js"><link rel="prefetch" href="/assets/js/66.3f70de9d.js"><link rel="prefetch" href="/assets/js/67.36086d6f.js"><link rel="prefetch" href="/assets/js/68.8fba5c6b.js"><link rel="prefetch" href="/assets/js/69.263a21b3.js"><link rel="prefetch" href="/assets/js/7.64431731.js"><link rel="prefetch" href="/assets/js/70.84d254fb.js"><link rel="prefetch" href="/assets/js/71.a11753f3.js"><link rel="prefetch" href="/assets/js/72.33d95b48.js"><link rel="prefetch" href="/assets/js/73.20e12ee5.js"><link rel="prefetch" href="/assets/js/74.ad1e1253.js"><link rel="prefetch" href="/assets/js/75.3938830d.js"><link rel="prefetch" href="/assets/js/76.cbe4e56f.js"><link rel="prefetch" href="/assets/js/77.ca3f6ff7.js"><link rel="prefetch" href="/assets/js/78.3ae77c21.js"><link rel="prefetch" href="/assets/js/79.b5607bbf.js"><link rel="prefetch" href="/assets/js/8.13ad8d1a.js"><link rel="prefetch" href="/assets/js/80.d5b46c20.js"><link rel="prefetch" href="/assets/js/81.cd73fb4a.js"><link rel="prefetch" href="/assets/js/83.0e1794ac.js"><link rel="prefetch" href="/assets/js/84.17e3b60b.js"><link rel="prefetch" href="/assets/js/85.da7e6949.js"><link rel="prefetch" href="/assets/js/86.85122ba1.js"><link rel="prefetch" href="/assets/js/87.91a7fdec.js"><link rel="prefetch" href="/assets/js/88.2d4d56f9.js"><link rel="prefetch" href="/assets/js/89.92ecdccd.js"><link rel="prefetch" href="/assets/js/9.342c429f.js"><link rel="prefetch" href="/assets/js/90.606b8ba6.js"><link rel="prefetch" href="/assets/js/91.71c7b5eb.js"><link rel="prefetch" href="/assets/js/92.39082cc5.js"><link rel="prefetch" href="/assets/js/93.8d64812f.js"><link rel="prefetch" href="/assets/js/94.e1cef610.js"><link rel="prefetch" href="/assets/js/95.cba47ae3.js"><link rel="prefetch" href="/assets/js/96.e2ee65e6.js"><link rel="prefetch" href="/assets/js/97.59f046d3.js"><link rel="prefetch" href="/assets/js/98.f1493adc.js"><link rel="prefetch" href="/assets/js/99.d4747ea8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b88a0442.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/hadoop.jpeg" alt="Hadoop中文网" class="logo"> <span class="site-name can-hide">Hadoop中文网</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/docs/releases/download.html" class="nav-link">下载安装</a></div><div class="nav-item"><a href="/docs/" class="nav-link router-link-active">参考文档</a></div><div class="nav-item"><a href="/docs/awesome/" class="nav-link">资源教程</a></div><div class="nav-item"><a href="/docs/releases/latestnews.html" class="nav-link">最新消息</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/hadoop-project-dist/hadoop-hdfs/HdfsUserGuide.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li><li class="dropdown-item"><!----> <a href="/en/docs/hadoop-project-dist/hadoop-hdfs/HdfsUserGuide.html" class="nav-link">English</a></li></ul></div></div> <a href="https://github.com/Y-sir/hadoop-cn" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/docs/releases/download.html" class="nav-link">下载安装</a></div><div class="nav-item"><a href="/docs/" class="nav-link router-link-active">参考文档</a></div><div class="nav-item"><a href="/docs/awesome/" class="nav-link">资源教程</a></div><div class="nav-item"><a href="/docs/releases/latestnews.html" class="nav-link">最新消息</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/hadoop-project-dist/hadoop-hdfs/HdfsUserGuide.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li><li class="dropdown-item"><!----> <a href="/en/docs/hadoop-project-dist/hadoop-hdfs/HdfsUserGuide.html" class="nav-link">English</a></li></ul></div></div> <a href="https://github.com/Y-sir/hadoop-cn" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>General</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Common</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>HDFS</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/hadoop-project-dist/hadoop-hdfs/HdfsDesign.html" class="sidebar-link">Architecture</a></li><li><a href="/docs/hadoop-project-dist/hadoop-hdfs/HdfsUserGuide.html" class="active sidebar-link">User Guide</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/hadoop-project-dist/hadoop-hdfs/HdfsUserGuide.html#purpose" class="sidebar-link">Purpose</a></li><li class="sidebar-sub-header"><a href="/docs/hadoop-project-dist/hadoop-hdfs/HdfsUserGuide.html#overview" class="sidebar-link">Overview</a></li><li class="sidebar-sub-header"><a href="/docs/hadoop-project-dist/hadoop-hdfs/HdfsUserGuide.html#prerequisites" class="sidebar-link">Prerequisites</a></li><li class="sidebar-sub-header"><a href="/docs/hadoop-project-dist/hadoop-hdfs/HdfsUserGuide.html#web-interface" class="sidebar-link">Web Interface</a></li><li class="sidebar-sub-header"><a href="/docs/hadoop-project-dist/hadoop-hdfs/HdfsUserGuide.html#shell-commands" class="sidebar-link">Shell Commands</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/hadoop-project-dist/hadoop-hdfs/HdfsUserGuide.html#dfsadmin-command" class="sidebar-link">DFSAdmin Command</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/hadoop-project-dist/hadoop-hdfs/HdfsUserGuide.html#secondary-namenode" class="sidebar-link">Secondary NameNode</a></li><li class="sidebar-sub-header"><a href="/docs/hadoop-project-dist/hadoop-hdfs/HdfsUserGuide.html#checkpoint-node" class="sidebar-link">Checkpoint Node</a></li><li class="sidebar-sub-header"><a href="/docs/hadoop-project-dist/hadoop-hdfs/HdfsUserGuide.html#backup-node" class="sidebar-link">Backup Node</a></li><li class="sidebar-sub-header"><a href="/docs/hadoop-project-dist/hadoop-hdfs/HdfsUserGuide.html#import-checkpoint" class="sidebar-link">Import Checkpoint</a></li><li class="sidebar-sub-header"><a href="/docs/hadoop-project-dist/hadoop-hdfs/HdfsUserGuide.html#balancer" class="sidebar-link">Balancer</a></li><li class="sidebar-sub-header"><a href="/docs/hadoop-project-dist/hadoop-hdfs/HdfsUserGuide.html#rack-awareness" class="sidebar-link">Rack Awareness</a></li><li class="sidebar-sub-header"><a href="/docs/hadoop-project-dist/hadoop-hdfs/HdfsUserGuide.html#safemode" class="sidebar-link">Safemode</a></li><li class="sidebar-sub-header"><a href="/docs/hadoop-project-dist/hadoop-hdfs/HdfsUserGuide.html#fsck" class="sidebar-link">fsck</a></li><li class="sidebar-sub-header"><a href="/docs/hadoop-project-dist/hadoop-hdfs/HdfsUserGuide.html#fetchdt" class="sidebar-link">fetchdt</a></li><li class="sidebar-sub-header"><a href="/docs/hadoop-project-dist/hadoop-hdfs/HdfsUserGuide.html#recovery-mode" class="sidebar-link">Recovery Mode</a></li><li class="sidebar-sub-header"><a href="/docs/hadoop-project-dist/hadoop-hdfs/HdfsUserGuide.html#upgrade-and-rollback" class="sidebar-link">Upgrade and Rollback</a></li><li class="sidebar-sub-header"><a href="/docs/hadoop-project-dist/hadoop-hdfs/HdfsUserGuide.html#datanode-hot-swap-drive" class="sidebar-link">DataNode Hot Swap Drive</a></li><li class="sidebar-sub-header"><a href="/docs/hadoop-project-dist/hadoop-hdfs/HdfsUserGuide.html#file-permissions-and-security" class="sidebar-link">File Permissions and Security</a></li><li class="sidebar-sub-header"><a href="/docs/hadoop-project-dist/hadoop-hdfs/HdfsUserGuide.html#scalability" class="sidebar-link">Scalability</a></li><li class="sidebar-sub-header"><a href="/docs/hadoop-project-dist/hadoop-hdfs/HdfsUserGuide.html#related-documentation" class="sidebar-link">Related Documentation</a></li></ul></li><li><a href="/docs/hadoop-project-dist/hadoop-hdfs/HDFSCommands.html" class="sidebar-link">Commands Reference</a></li><li><a href="/docs/hadoop-project-dist/hadoop-hdfs/HDFSHighAvailabilityWithQJM.html" class="sidebar-link">NameNode HA With QJM</a></li><li><a href="/docs/hadoop-project-dist/hadoop-hdfs/HDFSHighAvailabilityWithNFS.html" class="sidebar-link">NameNode HA With NFS</a></li><li><a href="/docs/hadoop-project-dist/hadoop-hdfs/Federation.html" class="sidebar-link">Federation</a></li><li><a href="/docs/hadoop-project-dist/hadoop-hdfs/ViewFs.html" class="sidebar-link">ViewFs</a></li><li><a href="/docs/hadoop-project-dist/hadoop-hdfs/HdfsSnapshots.html" class="sidebar-link">Snapshots</a></li><li><a href="/docs/hadoop-project-dist/hadoop-hdfs/HdfsEditsViewer.html" class="sidebar-link">Edits Viewer</a></li><li><a href="/docs/hadoop-project-dist/hadoop-hdfs/HdfsImageViewer.html" class="sidebar-link">Image Viewer</a></li><li><a href="/docs/hadoop-project-dist/hadoop-hdfs/HdfsPermissionsGuide.html" class="sidebar-link">Permissions and HDFS</a></li><li><a href="/docs/hadoop-project-dist/hadoop-hdfs/HdfsQuotaAdminGuide.html" class="sidebar-link">Quotas and HDFS</a></li><li><a href="/docs/hadoop-project-dist/hadoop-hdfs/LibHdfs.html" class="sidebar-link">libhdfs (C API)</a></li><li><a href="/docs/hadoop-project-dist/hadoop-hdfs/WebHDFS.html" class="sidebar-link">WebHDFS (REST API)</a></li><li><a href="/docs/hadoop-hdfs-httpfs/" class="sidebar-link">HttpFS</a></li><li><a href="/docs/hadoop-project-dist/hadoop-hdfs/ShortCircuitLocalReads.html" class="sidebar-link">Short Circuit Local Reads</a></li><li><a href="/docs/hadoop-project-dist/hadoop-hdfs/CentralizedCacheManagement.html" class="sidebar-link">Centralized Cache Management</a></li><li><a href="/docs/hadoop-project-dist/hadoop-hdfs/HdfsNfsGateway.html" class="sidebar-link">NFS Gateway</a></li><li><a href="/docs/hadoop-project-dist/hadoop-hdfs/HdfsRollingUpgrade.html" class="sidebar-link">Rolling Upgrade</a></li><li><a href="/docs/hadoop-project-dist/hadoop-hdfs/ExtendedAttributes.html" class="sidebar-link">Extended Attributes</a></li><li><a href="/docs/hadoop-project-dist/hadoop-hdfs/TransparentEncryption.html" class="sidebar-link">Transparent Encryption</a></li><li><a href="/docs/hadoop-project-dist/hadoop-hdfs/HdfsMultihoming.html" class="sidebar-link">Multihoming</a></li><li><a href="/docs/hadoop-project-dist/hadoop-hdfs/ArchivalStorage.html" class="sidebar-link">Storage Policies</a></li><li><a href="/docs/hadoop-project-dist/hadoop-hdfs/MemoryStorage.html" class="sidebar-link">Memory Storage Support</a></li><li><a href="/docs/hadoop-project-dist/hadoop-hdfs/SLGUserGuide.html" class="sidebar-link">Synthetic Load Generator</a></li><li><a href="/docs/hadoop-project-dist/hadoop-hdfs/HDFSErasureCoding.html" class="sidebar-link">Erasure Coding</a></li><li><a href="/docs/hadoop-project-dist/hadoop-hdfs/HDFSDiskbalancer.html" class="sidebar-link">Disk Balancer</a></li><li><a href="/docs/hadoop-project-dist/hadoop-hdfs/HdfsUpgradeDomain.html" class="sidebar-link">Upgrade Domain</a></li><li><a href="/docs/hadoop-project-dist/hadoop-hdfs/HdfsDataNodeAdminGuide.html" class="sidebar-link">DataNode Admin</a></li><li><a href="/docs/hadoop-project-dist/hadoop-hdfs-rbf/HDFSRouterFederation.html" class="sidebar-link">Router Federation</a></li><li><a href="/docs/hadoop-project-dist/hadoop-hdfs/HdfsProvidedStorage.html" class="sidebar-link">Provided Storage</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>MapReduce</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>MapReduce REST APIs</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>YARN</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>YARN REST APIs</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>YARN Service</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Submarine</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Hadoop Compatible File Systems</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Auth</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Tools</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Reference</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>配置</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="hdfs-users-guide"><a href="#hdfs-users-guide" class="header-anchor">#</a> HDFS Users Guide</h1> <h2 id="purpose"><a href="#purpose" class="header-anchor">#</a> Purpose</h2> <p>This document is a starting point for users working with Hadoop Distributed File System (HDFS) either as a part of a Hadoop cluster or as a stand-alone general purpose distributed file system. While HDFS is designed to “just work” in many environments, a working knowledge of HDFS helps greatly with configuration improvements and diagnostics on a specific cluster.</p> <h2 id="overview"><a href="#overview" class="header-anchor">#</a> Overview</h2> <p>HDFS is the primary distributed storage used by Hadoop applications. A HDFS cluster primarily consists of a NameNode that manages the file system metadata and DataNodes that store the actual data. The HDFS Architecture Guide describes HDFS in detail. This user guide primarily deals with the interaction of users and administrators with HDFS clusters. The HDFS architecture diagram depicts basic interactions among NameNode, the DataNodes, and the clients. Clients contact NameNode for file metadata or file modifications and perform actual file I/O directly with the DataNodes.</p> <p>The following are some of the salient features that could be of interest to many users.</p> <ul><li><p>Hadoop, including HDFS, is well suited for distributed storage and distributed processing using commodity hardware. It is fault tolerant, scalable, and extremely simple to expand. MapReduce, well known for its simplicity and applicability for large set of distributed applications, is an integral part of Hadoop.</p></li> <li><p>HDFS is highly configurable with a default configuration well suited for many installations. Most of the time, configuration needs to be tuned only for very large clusters.</p></li> <li><p>Hadoop is written in Java and is supported on all major platforms.</p></li> <li><p>Hadoop supports shell-like commands to interact with HDFS directly.</p></li> <li><p>The NameNode and Datanodes have built in web servers that makes it easy to check current status of the cluster.</p></li> <li><p>New features and improvements are regularly implemented in HDFS. The following is a subset of useful features in HDFS:</p> <ul><li><p>File permissions and authentication.</p></li> <li><p>Rack awareness: to take a node’s physical location into account while scheduling tasks and allocating storage.</p></li> <li><p>Safemode: an administrative mode for maintenance.</p></li> <li><p>fsck: a utility to diagnose health of the file system, to find missing files or blocks.</p></li> <li><p>fetchdt: a utility to fetch DelegationToken and store it in a file on the local system.</p></li> <li><p>Balancer: tool to balance the cluster when the data is unevenly distributed among DataNodes.</p></li> <li><p>Upgrade and rollback: after a software upgrade, it is possible to rollback to HDFS’ state before the upgrade in case of unexpected problems.</p></li> <li><p>Secondary NameNode: performs periodic checkpoints of the namespace and helps keep the size of file containing log of HDFS modifications within certain limits at the NameNode.</p></li> <li><p>Checkpoint node: performs periodic checkpoints of the namespace and helps minimize the size of the log stored at the NameNode containing changes to the HDFS. Replaces the role previously filled by the Secondary NameNode, though is not yet battle hardened. The NameNode allows multiple Checkpoint nodes simultaneously, as long as there are no Backup nodes registered with the system.</p></li> <li><p>Backup node: An extension to the Checkpoint node. In addition to checkpointing it also receives a stream of edits from the NameNode and maintains its own in-memory copy of the namespace, which is always in sync with the active NameNode namespace state. Only one Backup node may be registered with the NameNode at once.</p></li></ul></li></ul> <h2 id="prerequisites"><a href="#prerequisites" class="header-anchor">#</a> Prerequisites</h2> <p>The following documents describe how to install and set up a Hadoop cluster:</p> <ul><li><a href="/docs/hadoop-project-dist/hadoop-common/SingleCluster.html">Single Node Setup</a> for first-time users.</li> <li><a href="/docs/hadoop-project-dist/hadoop-common/ClusterSetup.html">Cluster Setup</a> for large, distributed clusters.</li></ul> <p>The rest of this document assumes the user is able to set up and run a HDFS with at least one DataNode. For the purpose of this document, both the NameNode and DataNode could be running on the same physical machine.</p> <h2 id="web-interface"><a href="#web-interface" class="header-anchor">#</a> Web Interface</h2> <p>NameNode and DataNode each run an internal web server in order to display basic information about the current status of the cluster. With the default configuration, the NameNode front page is at http://namenode-name:9870/. It lists the DataNodes in the cluster and basic statistics of the cluster. The web interface can also be used to browse the file system (using “Browse the file system” link on the NameNode front page).</p> <h2 id="shell-commands"><a href="#shell-commands" class="header-anchor">#</a> Shell Commands</h2> <p>Hadoop includes various shell-like commands that directly interact with HDFS and other file systems that Hadoop supports. The command bin/hdfs dfs -help lists the commands supported by Hadoop shell. Furthermore, the command bin/hdfs dfs -help command-name displays more detailed help for a command. These commands support most of the normal files system operations like copying files, changing file permissions, etc. It also supports a few HDFS specific operations like changing replication of files. For more information see <a href="/docs/hadoop-project-dist/hadoop-common/FileSystemShell.html">File System Shell Guide</a>.</p> <h3 id="dfsadmin-command"><a href="#dfsadmin-command" class="header-anchor">#</a> DFSAdmin Command</h3> <p>The bin/hdfs dfsadmin command supports a few HDFS administration related operations. The bin/hdfs dfsadmin -help command lists all the commands currently supported. For e.g.:</p> <ul><li><p>-report: reports basic statistics of HDFS. Some of this information is also available on the NameNode front page.</p></li> <li><p>-safemode: though usually not required, an administrator can manually enter or leave Safemode.</p></li> <li><p>-finalizeUpgrade: removes previous backup of the cluster made during last upgrade.</p></li> <li><p>-refreshNodes: Updates the namenode with the set of datanodes allowed to connect to the namenode. By default, Namenodes re-read datanode hostnames in the file defined by dfs.hosts, dfs.hosts.exclude Hosts defined in dfs.hosts are the datanodes that are part of the cluster. If there are entries in dfs.hosts, only the hosts in it are allowed to register with the namenode. Entries in dfs.hosts.exclude are datanodes that need to be decommissioned. Alternatively if dfs.namenode.hosts.provider.classname is set to org.apache.hadoop.hdfs.server.blockmanagement.CombinedHostFileManager, all include and exclude hosts are specified in the JSON file defined by dfs.hosts. Datanodes complete decommissioning when all the replicas from them are replicated to other datanodes. Decommissioned nodes are not automatically shutdown and are not chosen for writing for new replicas.</p></li> <li><p>-printTopology : Print the topology of the cluster. Display a tree of racks and datanodes attached to the tracks as viewed by the NameNode.</p></li></ul> <p>For command usage, see <a href="/docs/hadoop-project-dist/hadoop-hdfs/HDFSCommands.html#dfsadmin">dfsadmin</a>.</p> <h2 id="secondary-namenode"><a href="#secondary-namenode" class="header-anchor">#</a> Secondary NameNode</h2> <p>The NameNode stores modifications to the file system as a log appended to a native file system file, edits. When a NameNode starts up, it reads HDFS state from an image file, fsimage, and then applies edits from the edits log file. It then writes new HDFS state to the fsimage and starts normal operation with an empty edits file. Since NameNode merges fsimage and edits files only during start up, the edits log file could get very large over time on a busy cluster. Another side effect of a larger edits file is that next restart of NameNode takes longer.</p> <p>The secondary NameNode merges the fsimage and the edits log files periodically and keeps edits log size within a limit. It is usually run on a different machine than the primary NameNode since its memory requirements are on the same order as the primary NameNode.</p> <p>The start of the checkpoint process on the secondary NameNode is controlled by two configuration parameters.</p> <ul><li><p>dfs.namenode.checkpoint.period, set to 1 hour by default, specifies the maximum delay between two consecutive checkpoints, and</p></li> <li><p>dfs.namenode.checkpoint.txns, set to 1 million by default, defines the number of uncheckpointed transactions on the NameNode which will force an urgent checkpoint, even if the checkpoint period has not been reached.</p></li></ul> <p>The secondary NameNode stores the latest checkpoint in a directory which is structured the same way as the primary NameNode’s directory. So that the check pointed image is always ready to be read by the primary NameNode if necessary.</p> <p>For command usage, see <a href="/docs/hadoop-project-dist/hadoop-hdfs/HDFSCommands.html#secondarynamenode">secondarynamenode</a>.</p> <h2 id="checkpoint-node"><a href="#checkpoint-node" class="header-anchor">#</a> Checkpoint Node</h2> <p>NameNode persists its namespace using two files: fsimage, which is the latest checkpoint of the namespace and edits, a journal (log) of changes to the namespace since the checkpoint. When a NameNode starts up, it merges the fsimage and edits journal to provide an up-to-date view of the file system metadata. The NameNode then overwrites fsimage with the new HDFS state and begins a new edits journal.</p> <p>The Checkpoint node periodically creates checkpoints of the namespace. It downloads fsimage and edits from the active NameNode, merges them locally, and uploads the new image back to the active NameNode. The Checkpoint node usually runs on a different machine than the NameNode since its memory requirements are on the same order as the NameNode. The Checkpoint node is started by bin/hdfs namenode -checkpoint on the node specified in the configuration file.</p> <p>The location of the Checkpoint (or Backup) node and its accompanying web interface are configured via the dfs.namenode.backup.address and dfs.namenode.backup.http-address configuration variables.</p> <p>The start of the checkpoint process on the Checkpoint node is controlled by two configuration parameters.</p> <ul><li><p>dfs.namenode.checkpoint.period, set to 1 hour by default, specifies the maximum delay between two consecutive checkpoints</p></li> <li><p>dfs.namenode.checkpoint.txns, set to 1 million by default, defines the number of uncheckpointed transactions on the NameNode which will force an urgent checkpoint, even if the checkpoint period has not been reached.</p></li></ul> <p>The Checkpoint node stores the latest checkpoint in a directory that is structured the same as the NameNode’s directory. This allows the checkpointed image to be always available for reading by the NameNode if necessary. See Import checkpoint.</p> <p>Multiple checkpoint nodes may be specified in the cluster configuration file.</p> <p>For command usage, see <a href="/docs/hadoop-project-dist/hadoop-hdfs/HDFSCommands.html#namenode">namenode</a>.</p> <h2 id="backup-node"><a href="#backup-node" class="header-anchor">#</a> Backup Node</h2> <p>The Backup node provides the same checkpointing functionality as the Checkpoint node, as well as maintaining an in-memory, up-to-date copy of the file system namespace that is always synchronized with the active NameNode state. Along with accepting a journal stream of file system edits from the NameNode and persisting this to disk, the Backup node also applies those edits into its own copy of the namespace in memory, thus creating a backup of the namespace.</p> <p>The Backup node does not need to download fsimage and edits files from the active NameNode in order to create a checkpoint, as would be required with a Checkpoint node or Secondary NameNode, since it already has an up-to-date state of the namespace state in memory. The Backup node checkpoint process is more efficient as it only needs to save the namespace into the local fsimage file and reset edits.</p> <p>As the Backup node maintains a copy of the namespace in memory, its RAM requirements are the same as the NameNode.</p> <p>The NameNode supports one Backup node at a time. No Checkpoint nodes may be registered if a Backup node is in use. Using multiple Backup nodes concurrently will be supported in the future.</p> <p>The Backup node is configured in the same manner as the Checkpoint node. It is started with bin/hdfs namenode -backup.</p> <p>The location of the Backup (or Checkpoint) node and its accompanying web interface are configured via the dfs.namenode.backup.address and dfs.namenode.backup.http-address configuration variables.</p> <p>Use of a Backup node provides the option of running the NameNode with no persistent storage, delegating all responsibility for persisting the state of the namespace to the Backup node. To do this, start the NameNode with the -importCheckpoint option, along with specifying no persistent storage directories of type edits dfs.namenode.edits.dir for the NameNode configuration.</p> <p>For a complete discussion of the motivation behind the creation of the Backup node and Checkpoint node, see <a href="https://issues.apache.org/jira/browse/HADOOP-4539" target="_blank" rel="noopener noreferrer">HADOOP-4539<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. For command usage, see <a href="/docs/hadoop-project-dist/hadoop-hdfs/HDFSCommands.html#namenode">namenode</a>.</p> <h2 id="import-checkpoint"><a href="#import-checkpoint" class="header-anchor">#</a> Import Checkpoint</h2> <p>The latest checkpoint can be imported to the NameNode if all other copies of the image and the edits files are lost. In order to do that one should:</p> <ul><li><p>Create an empty directory specified in the dfs.namenode.name.dir configuration variable;</p></li> <li><p>Specify the location of the checkpoint directory in the configuration variable dfs.namenode.checkpoint.dir;</p></li> <li><p>and start the NameNode with -importCheckpoint option.</p></li></ul> <p>The NameNode will upload the checkpoint from the dfs.namenode.checkpoint.dir directory and then save it to the NameNode directory(s) set in dfs.namenode.name.dir. The NameNode will fail if a legal image is contained in dfs.namenode.name.dir. The NameNode verifies that the image in dfs.namenode.checkpoint.dir is consistent, but does not modify it in any way.</p> <p>For command usage, see <a href="/docs/hadoop-project-dist/hadoop-hdfs/HDFSCommands.html#namenode">namenode</a>.</p> <h2 id="balancer"><a href="#balancer" class="header-anchor">#</a> Balancer</h2> <p>HDFS data might not always be be placed uniformly across the DataNode. One common reason is addition of new DataNodes to an existing cluster. While placing new blocks (data for a file is stored as a series of blocks), NameNode considers various parameters before choosing the DataNodes to receive these blocks. Some of the considerations are:</p> <ul><li><p>Policy to keep one of the replicas of a block on the same node as the node that is writing the block.</p></li> <li><p>Need to spread different replicas of a block across the racks so that cluster can survive loss of whole rack.</p></li> <li><p>One of the replicas is usually placed on the same rack as the node writing to the file so that cross-rack network I/O is reduced.</p></li> <li><p>Spread HDFS data uniformly across the DataNodes in the cluster.</p></li></ul> <p>Due to multiple competing considerations, data might not be uniformly placed across the DataNodes. HDFS provides a tool for administrators that analyzes block placement and rebalanaces data across the DataNode. A brief administrator’s guide for balancer is available at <a href="https://issues.apache.org/jira/browse/HADOOP-1652" target="_blank" rel="noopener noreferrer">HADOOP-1652<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>For command usage, see <a href="/docs/hadoop-project-dist/hadoop-hdfs/HDFSCommands.html#balancer">balancer</a>.</p> <h2 id="rack-awareness"><a href="#rack-awareness" class="header-anchor">#</a> Rack Awareness</h2> <p>A HDFS cluster can recognize the topology of racks where each nodes are put. It is important to configure this topology in order to optimize the data capacity and usage. For more detail, please check the <a href="/docs/hadoop-project-dist/hadoop-common/RackAwareness.html">rack awareness</a> in common document.</p> <h2 id="safemode"><a href="#safemode" class="header-anchor">#</a> Safemode</h2> <p>During start up the NameNode loads the file system state from the fsimage and the edits log file. It then waits for DataNodes to report their blocks so that it does not prematurely start replicating the blocks though enough replicas already exist in the cluster. During this time NameNode stays in Safemode. Safemode for the NameNode is essentially a read-only mode for the HDFS cluster, where it does not allow any modifications to file system or blocks. Normally the NameNode leaves Safemode automatically after the DataNodes have reported that most file system blocks are available. If required, HDFS could be placed in Safemode explicitly using bin/hdfs dfsadmin -safemode command. NameNode front page shows whether Safemode is on or off. A more detailed description and configuration is maintained as JavaDoc for setSafeMode().</p> <h2 id="fsck"><a href="#fsck" class="header-anchor">#</a> fsck</h2> <p>HDFS supports the fsck command to check for various inconsistencies. It is designed for reporting problems with various files, for example, missing blocks for a file or under-replicated blocks. Unlike a traditional fsck utility for native file systems, this command does not correct the errors it detects. Normally NameNode automatically corrects most of the recoverable failures. By default fsck ignores open files but provides an option to select all files during reporting. The HDFS fsck command is not a Hadoop shell command. It can be run as bin/hdfs fsck. For command usage, see <a href="/docs/hadoop-project-dist/hadoop-hdfs/HDFSCommands.html#fsck">fsck</a>. fsck can be run on the whole file system or on a subset of files.</p> <h2 id="fetchdt"><a href="#fetchdt" class="header-anchor">#</a> fetchdt</h2> <p>HDFS supports the fetchdt command to fetch Delegation Token and store it in a file on the local system. This token can be later used to access secure server (NameNode for example) from a non secure client. Utility uses either RPC or HTTPS (over Kerberos) to get the token, and thus requires kerberos tickets to be present before the run (run kinit to get the tickets). The HDFS fetchdt command is not a Hadoop shell command. It can be run as bin/hdfs fetchdt DTfile. After you got the token you can run an HDFS command without having Kerberos tickets, by pointing HADOOP_TOKEN_FILE_LOCATION environmental variable to the delegation token file. For command usage, see <a href="/docs/hadoop-project-dist/hadoop-hdfs/HDFSCommands.html#fetchdt">fetchdt</a> command.</p> <h2 id="recovery-mode"><a href="#recovery-mode" class="header-anchor">#</a> Recovery Mode</h2> <p>Typically, you will configure multiple metadata storage locations. Then, if one storage location is corrupt, you can read the metadata from one of the other storage locations.</p> <p>However, what can you do if the only storage locations available are corrupt? In this case, there is a special NameNode startup mode called Recovery mode that may allow you to recover most of your data.</p> <p>You can start the NameNode in recovery mode like so: namenode -recover</p> <p>When in recovery mode, the NameNode will interactively prompt you at the command line about possible courses of action you can take to recover your data.</p> <p>If you don’t want to be prompted, you can give the -force option. This option will force recovery mode to always select the first choice. Normally, this will be the most reasonable choice.</p> <p>Because Recovery mode can cause you to lose data, you should always back up your edit log and fsimage before using it.</p> <h2 id="upgrade-and-rollback"><a href="#upgrade-and-rollback" class="header-anchor">#</a> Upgrade and Rollback</h2> <p>When Hadoop is upgraded on an existing cluster, as with any software upgrade, it is possible there are new bugs or incompatible changes that affect existing applications and were not discovered earlier. In any non-trivial HDFS installation, it is not an option to loose any data, let alone to restart HDFS from scratch. HDFS allows administrators to go back to earlier version of Hadoop and rollback the cluster to the state it was in before the upgrade. HDFS upgrade is described in more detail in <a href="http://wiki.apache.org/hadoop/Hadoop_Upgrade" target="_blank" rel="noopener noreferrer">Hadoop Upgrade<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> Wiki page. HDFS can have one such backup at a time. Before upgrading, administrators need to remove existing backup using bin/hadoop dfsadmin -finalizeUpgrade command. The following briefly describes the typical upgrade procedure:</p> <ul><li><p>Before upgrading Hadoop software, finalize if there an existing backup.</p></li> <li><p>Stop the cluster and distribute new version of Hadoop.</p></li> <li><p>Run the new version with -upgrade option (sbin/start-dfs.sh -upgrade).</p></li> <li><p>Most of the time, cluster works just fine. Once the new HDFS is considered working well (may be after a few days of operation), finalize the upgrade. Note that until the cluster is finalized, deleting the files that existed before the upgrade does not free up real disk space on the DataNodes.</p></li> <li><p>If there is a need to move back to the old version,</p> <ul><li><p>stop the cluster and distribute earlier version of Hadoop.</p></li> <li><p>run the rollback command on the namenode (bin/hdfs namenode -rollback).</p></li> <li><p>start the cluster with rollback option. (sbin/start-dfs.sh -rollback).</p></li></ul></li></ul> <p>When upgrading to a new version of HDFS, it is necessary to rename or delete any paths that are reserved in the new version of HDFS. If the NameNode encounters a reserved path during upgrade, it will print an error like the following:</p> <p>/.reserved is a reserved path and .snapshot is a reserved path component in this version of HDFS. Please rollback and delete or rename this path, or upgrade with the -renameReserved [key-value pairs] option to automatically rename these paths during upgrade.</p> <p>Specifying -upgrade -renameReserved [optional key-value pairs] causes the NameNode to automatically rename any reserved paths found during startup. For example, to rename all paths named .snapshot to .my-snapshot and .reserved to .my-reserved, a user would specify -upgrade -renameReserved .snapshot=.my-snapshot,.reserved=.my-reserved.</p> <p>If no key-value pairs are specified with -renameReserved, the NameNode will then suffix reserved paths with .<LAYOUT-VERSION>.UPGRADE_RENAMED, e.g. .snapshot.-51.UPGRADE_RENAMED.</LAYOUT-VERSION></p> <p>There are some caveats to this renaming process. It’s recommended, if possible, to first hdfs dfsadmin -saveNamespace before upgrading. This is because data inconsistency can result if an edit log operation refers to the destination of an automatically renamed file.</p> <h2 id="datanode-hot-swap-drive"><a href="#datanode-hot-swap-drive" class="header-anchor">#</a> DataNode Hot Swap Drive</h2> <p>Datanode supports hot swappable drives. The user can add or replace HDFS data volumes without shutting down the DataNode. The following briefly describes the typical hot swapping drive procedure:</p> <ul><li><p>If there are new storage directories, the user should format them and mount them appropriately.</p></li> <li><p>The user updates the DataNode configuration dfs.datanode.data.dir to reflect the data volume directories that will be actively in use.</p></li> <li><p>The user runs dfsadmin -reconfig datanode HOST:PORT start to start the reconfiguration process. The user can use dfsadmin -reconfig datanode HOST:PORT status to query the running status of the reconfiguration task.</p></li> <li><p>Once the reconfiguration task has completed, the user can safely umount the removed data volume directories and physically remove the disks.</p></li></ul> <h2 id="file-permissions-and-security"><a href="#file-permissions-and-security" class="header-anchor">#</a> File Permissions and Security</h2> <p>The file permissions are designed to be similar to file permissions on other familiar platforms like Linux. Currently, security is limited to simple file permissions. The user that starts NameNode is treated as the superuser for HDFS. Future versions of HDFS will support network authentication protocols like Kerberos for user authentication and encryption of data transfers. The details are discussed in the Permissions Guide.</p> <h2 id="scalability"><a href="#scalability" class="header-anchor">#</a> Scalability</h2> <p>Hadoop currently runs on clusters with thousands of nodes. The <a href="http://wiki.apache.org/hadoop/PoweredBy" target="_blank" rel="noopener noreferrer">PoweredBy<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> Wiki page lists some of the organizations that deploy Hadoop on large clusters. HDFS has one NameNode for each cluster. Currently the total memory available on NameNode is the primary scalability limitation. On very large clusters, increasing average size of files stored in HDFS helps with increasing cluster size without increasing memory requirements on NameNode. The default configuration may not suite very large clusters. The <a href="http://wiki.apache.org/hadoop/FAQ" target="_blank" rel="noopener noreferrer">FAQ<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> Wiki page lists suggested configuration improvements for large Hadoop clusters.</p> <h2 id="related-documentation"><a href="#related-documentation" class="header-anchor">#</a> Related Documentation</h2> <p>This user guide is a good starting point for working with HDFS. While the user guide continues to improve, there is a large wealth of documentation about Hadoop and HDFS. The following list is a starting point for further exploration:</p> <ul><li><a href="http://hadoop.apache.org" target="_blank" rel="noopener noreferrer">Hadoop Site<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>: The home page for the Apache Hadoop site.</li> <li><a href="http://wiki.apache.org/hadoop/FrontPage" target="_blank" rel="noopener noreferrer">Hadoop Wiki<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>: The home page (FrontPage) for the Hadoop Wiki. Unlike the released documentation, which is part of Hadoop source tree, Hadoop Wiki is regularly edited by Hadoop Community.</li> <li><a href="http://wiki.apache.org/hadoop/FAQ" target="_blank" rel="noopener noreferrer">FAQ<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>: The FAQ Wiki page.</li> <li><a href="/docs/api/index.html">Hadoop JavaDoc API</a>.</li> <li>Hadoop User Mailing List: user[at]hadoop.apache.org.</li> <li>Explore <a href="./hdfs-default.xml">hdfs-default.xml</a>. It includes brief description of most of the configuration variables available.</li> <li><a href="/docs/hadoop-project-dist/hadoop-hdfs/HDFSCommands.html">HDFS Commands Guide</a>: HDFS commands usage.</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/Y-sir/hadoop-cn/edit/master/docs/docs/hadoop-project-dist/hadoop-hdfs/HdfsUserGuide.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">最后更新:</span> <span class="time">2019/11/1 下午5:21:59</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/hadoop-project-dist/hadoop-hdfs/HdfsDesign.html" class="prev">Architecture</a></span> <span class="next"><a href="/docs/hadoop-project-dist/hadoop-hdfs/HDFSCommands.html">Commands Reference</a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.eea58141.js" defer></script><script src="/assets/js/2.1527429e.js" defer></script><script src="/assets/js/82.21b80d08.js" defer></script>
  </body>
</html>
